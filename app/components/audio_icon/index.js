import styles from './audio.module.scss'
import { useState, useRef, useEffect } from 'react'

import { Howl } from 'howler';

export default function  audio_icon() {

    const audioRef = useRef()
    const [isPlaying, setIsPlaying] = useState(true);

    const [sound, setSound] = useState();

    useEffect(() => {
        const s = new Howl({
            src: ['/audio/song.mp3'],
            onload: () => {
                s.play()
            }
        })
        setSound(s)
        // return () => {
        //   s.unload();
        // };
    }, []);

    const toggleAudio = () => {
        setIsPlaying(!isPlaying);
        return sound.playing() ? sound.pause() : sound.play();
    };
    
    const audioLoaderClassName = `${styles.audio_wave} ${isPlaying ? styles.audio_wave_sound : styles.audio_wave_silence}`;

    return(
        <div className={styles.audio}
            onClick={toggleAudio}
        >
            <div className={styles.audio_loader}>
                <svg ref={audioRef} className={audioLoaderClassName} width="50" height="39" viewBox="0 0 50 39" xmlns="http://www.w3.org/2000/svg">
                    <path className={styles.audio_line_1} data-name="Line 1" d="M0.910055 15H0.780055C0.554473 15.0508 0.353468 15.1782 0.211254 15.3605C0.0690393 15.5429 -0.00559504 15.7688 5.45912e-05 16V22C5.45912e-05 22.2652 0.105411 22.5196 0.292948 22.7071C0.480484 22.8946 0.734838 23 1.00005 23C1.26527 23 1.51963 22.8946 1.70716 22.7071C1.8947 22.5196 2.00005 22.2652 2.00005 22V16C2.00005 15.7348 1.8947 15.4804 1.70716 15.2929C1.51963 15.1054 1.26527 15 1.00005 15H0.910055Z" />
                    <path className={styles.audio_line_2} data-name="Line 2" d="M6.91005 9H6.78005C6.55447 9.0508 6.35347 9.17821 6.21125 9.36054C6.06904 9.54286 5.9944 9.76884 6.00005 10V28C6.00005 28.2652 6.10541 28.5196 6.29295 28.7071C6.48048 28.8946 6.73484 29 7.00005 29C7.26527 29 7.51962 28.8946 7.70716 28.7071C7.8947 28.5196 8.00005 28.2652 8.00005 28V10C8.00005 9.73478 7.8947 9.48043 7.70716 9.29289C7.51962 9.10536 7.26527 9 7.00005 9H6.91005Z" />
                    <path className={styles.audio_line_3} data-name="Line 3" d="M12.9101 0H12.7801C12.5545 0.0508018 12.3535 0.178209 12.2113 0.360535C12.069 0.542862 11.9944 0.768838 12.0001 1V37C12.0001 37.2652 12.1054 37.5196 12.2929 37.7071C12.4805 37.8946 12.7348 38 13.0001 38C13.2653 38 13.5196 37.8946 13.7072 37.7071C13.8947 37.5196 14.0001 37.2652 14.0001 37V1C14.0001 0.734784 13.8947 0.48043 13.7072 0.292893C13.5196 0.105357 13.2653 0 13.0001 0L12.9101 0Z" />
                    <path className={styles.audio_line_4} data-name="Line 4" d="M18.91 10H18.79C18.5626 10.0488 18.3593 10.1753 18.2151 10.3579C18.0709 10.5404 17.9948 10.7675 18 11V27C18 27.2652 18.1054 27.5196 18.2929 27.7071C18.4804 27.8946 18.7348 28 19 28C19.2652 28 19.5196 27.8946 19.7071 27.7071C19.8946 27.5196 20 27.2652 20 27V11C20 10.7348 19.8946 10.4804 19.7071 10.2929C19.5196 10.1054 19.2652 10 19 10H18.91Z" />
                    <path className={styles.audio_line_5} data-name="Line 5" d="M24.91 15H24.79C24.5626 15.0488 24.3593 15.1753 24.2151 15.3579C24.0709 15.5404 23.9948 15.7675 24 16V22C24 22.2652 24.1054 22.5196 24.2929 22.7071C24.4804 22.8946 24.7348 23 25 23C25.2652 23 25.5196 22.8946 25.7071 22.7071C25.8946 22.5196 26 22.2652 26 22V16C26 15.7348 25.8946 15.4804 25.7071 15.2929C25.5196 15.1054 25.2652 15 25 15H24.91Z" />
                    <path className={styles.audio_line_6} data-name="Line 6" d="M30.91 10H30.79C30.5626 10.0488 30.3593 10.1753 30.2151 10.3579C30.0709 10.5404 29.9948 10.7675 30 11V27C30 27.2652 30.1054 27.5196 30.2929 27.7071C30.4804 27.8946 30.7348 28 31 28C31.2652 28 31.5196 27.8946 31.7071 27.7071C31.8946 27.5196 32 27.2652 32 27V11C32 10.7348 31.8946 10.4804 31.7071 10.2929C31.5196 10.1054 31.2652 10 31 10H30.91Z" />
                    <path className={styles.audio_line_7} data-name="Line 7" d="M36.9101 0H36.7801C36.5545 0.0508018 36.3535 0.178209 36.2113 0.360535C36.069 0.542862 35.9944 0.768838 36.0001 1V37C36.0001 37.2652 36.1054 37.5196 36.2929 37.7071C36.4805 37.8946 36.7348 38 37.0001 38C37.2653 38 37.5196 37.8946 37.7072 37.7071C37.8947 37.5196 38.0001 37.2652 38.0001 37V1C38.0001 0.734784 37.8947 0.48043 37.7072 0.292893C37.5196 0.105357 37.2653 0 37.0001 0L36.9101 0Z" />
                    <path className={styles.audio_line_8} data-name="Line 8" d="M42.9101 9H42.7801C42.5545 9.0508 42.3535 9.17821 42.2113 9.36054C42.069 9.54286 41.9944 9.76884 42.0001 10V28C42.0001 28.2652 42.1054 28.5196 42.2929 28.7071C42.4805 28.8946 42.7348 29 43.0001 29C43.2653 29 43.5196 28.8946 43.7072 28.7071C43.8947 28.5196 44.0001 28.2652 44.0001 28V10C44.0001 9.73478 43.8947 9.48043 43.7072 9.29289C43.5196 9.10536 43.2653 9 43.0001 9H42.9101Z" />
                    <path className={styles.audio_line_9} data-name="Line 9" d="M48.91 15H48.79C48.5626 15.0488 48.3593 15.1753 48.2151 15.3579C48.0709 15.5404 47.9948 15.7675 48 16V22C48 22.2652 48.1054 22.5196 48.2929 22.7071C48.4804 22.8946 48.7348 23 49 23C49.2652 23 49.5196 22.8946 49.7071 22.7071C49.8946 22.5196 50 22.2652 50 22V16C50 15.7348 49.8946 15.4804 49.7071 15.2929C49.5196 15.1054 49.2652 15 49 15H48.91Z" />
                    <path className={styles.audio_line_10} data-name="Line 10" d="M49.1934 4.30788L49.1263 4.19655C48.9449 4.04251 48.6783 3.96854 48.3719 3.98724C48.0654 4.00593 47.7381 4.11613 47.4456 4.29908L1.4402 32.0374C1.10127 32.2417 0.830627 32.5279 0.687802 32.833C0.544977 33.1381 0.541673 33.4371 0.678616 33.6642C0.815558 33.8914 1.08153 34.028 1.41802 34.0441C1.75451 34.0602 2.13396 33.9545 2.47289 33.7501L48.4783 6.01185C48.8172 5.8075 49.0879 5.52129 49.2307 5.21619C49.3735 4.91109 49.3768 4.61208 49.2399 4.38496L49.1934 4.30788Z" />
                </svg>
            </div>
        </div>
    )
}